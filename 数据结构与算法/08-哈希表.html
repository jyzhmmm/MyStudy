<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function HashTable() {
            this.storage = []
            this.count = 0
            this.limit = 5 // 数组长度

            // 设计哈希函数
            // 将字符串转成比较大的数字：hashicode
            // 将大的数字hashCode压缩到数组范围内
            HashTable.prototype.hashFunc = function(str, size) {
                    let hashCode = 0

                    // 霍纳算法，计算hashCode的值
                    // cats -> Unicode编码
                    for (let i = 0; i < str.length; i++) {
                        hashCode = 37 * hashCode + str.charCodeAt(i)
                    }

                    // 取余操作
                    let index = hashCode % size
                    return index
                }
                // 插入修改操作
            HashTable.prototype.put = function(key, value) {
                // 根据key获取对应的index
                let index = this.hashFunc(key, this.limit)

                // 根据index取出对应的bucket
                let bucket = this.storage[index]

                // 判断bucket是否为空
                if (bucket == null) {
                    bucket = []
                    this.storage[index] = bucket
                }

                // 判断是否是修改数据
                for (let i = 0; i < bucket.length; i++) {
                    let tuple = bucket[i]
                    if (tuple[0] == key) {
                        tuple[1] = value
                        return
                    }
                }

                // 添加操作
                bucket.push([key, value])
            }
        }
    </script>
</body>

</html>